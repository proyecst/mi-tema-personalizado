<section class="ultimate-grid-section" style="background-color: {{ section.settings.bg_color }};">
  <div class="ultimate-container">
    {% if section.settings.main_title != blank %}
      <h2 class="ultimate-main-title">{{ section.settings.main_title }}</h2>
    {% endif %}

    <div class="ultimate-grid">
      {% for block in section.blocks %}
        <div class="ultimate-card card-{{ block.type }}" {{ block.shopify_attributes }}>
          
          {% case block.type %}
            
            {% when 'product_card' %}
              {%- assign product_ref = block.settings.product_id -%}
              <div class="card-inner">
                <div class="media-wrapper">
                  {% if product_ref != blank %}
                    <img src="{{ product_ref.featured_image | img_url: '600x600' }}" alt="{{ product_ref.title }}">
                  {% else %}
                    {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                  <span class="ultra-badge">{{ block.settings.badge }}</span>
                </div>
                <div class="info-wrapper">
                  <h3>{{ product_ref.title | default: "Producto de Ejemplo" }}</h3>
                  <p class="ultra-price">{{ product_ref.price | money }}</p>
                  <button class="ultra-btn-add" onclick="addToCartAjax('{{ product_ref.variants.first.id }}', this)">
                    {{ block.settings.btn_text }}
                  </button>
                </div>
              </div>

            {% when 'media_card' %}
              <div class="card-inner">
                <div class="media-wrapper">
                  {% if block.settings.image != blank %}
                    <img src="{{ block.settings.image | img_url: '600x600' }}" alt="Imagen">
                  {% elsif block.settings.video_url != blank %}
                    <iframe src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}" frameborder="0"></iframe>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                </div>
                <div class="info-wrapper">
                  <h3>{{ block.settings.title }}</h3>
                  <p>{{ block.settings.text }}</p>
                  {% if block.settings.link_url != blank %}
                    <a href="{{ block.settings.link_url }}" class="ultra-link">{{ block.settings.link_label }} â†’</a>
                  {% endif %}
                </div>
              </div>

          {% endcase %}
          
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .ultimate-grid-section { padding: 80px 5%; color: {{ section.settings.text_color }}; }
  .ultimate-container { max-width: 1400px; margin: 0 auto; }
  .ultimate-main-title { text-align: center; font-size: 40px; font-weight: 900; margin-bottom: 60px; letter-spacing: -1px; }

  .ultimate-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,
