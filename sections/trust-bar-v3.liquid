<style>
  /* 1. IMPORTACIÓN DE TIPOGRAFÍA */
  @font-face {
    font-family: 'Ethnocentric';
    /* Asegúrate de que el link sea el mismo que usaste en el Header */
    src: url('LINK_DE_TU_ARCHIVO_OTF_AQUI') format('opentype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  :root { 
    --k-cyan: {{ section.settings.accent_color | default: '#00D1FF' }}; 
    --k-dark: #050505; 
    --k-font: 'Ethnocentric', sans-serif;
  }

  .trust-bar-section { 
    background-color: #000; 
    padding: 40px 0; 
    border-top: 1px solid #1a1a1a; 
    font-family: sans-serif; /* General en sans-serif para lectura rápida */
  }

  .trust-bar-grid { 
    display: grid; 
    grid-template-columns: repeat(4, 1fr); 
    gap: 15px; 
    max-width: 1400px; 
    margin: 0 auto; 
    padding: 0 20px; 
  }

  .trust-item-wrapper { 
    background: var(--k-dark); 
    border-radius: 4px; /* Bordes más rectos para look tech */
    border: 1px solid #1a1a1a; 
    transition: 0.3s; 
    overflow: hidden; 
    position: relative; 
  }

  .trust-item-wrapper:hover { border-color: var(--k-cyan); }
  .trust-item-wrapper.is-active { border-color: var(--k-cyan); box-shadow: 0 0 15px rgba(0, 209, 255, 0.1); }
  
  .trust-header { display: flex; align-items: center; gap: 10px; padding: 15px; cursor: pointer; }
  .trust-icon-wrapper { width: 22px; color: var(--k-cyan); display: flex; align-items: center; }
  
  .trust-text { display: flex; flex-direction: column; }
  
  /* APLICANDO ETHNOCENTRIC A LOS TÍTULOS */
  .trust-title { 
    color: #fff; 
    font-family: var(--k-font);
    font-size: 9px; /* Ajustado por el ancho de la fuente */
    letter-spacing: 1px;
    text-transform: uppercase; 
    display: block; 
  }

  .trust-subtitle { 
    color: #666; 
    font-size: 10px; 
    margin-top: 4px;
  }
  
  .trust-content { max-height: 0; overflow: hidden; transition: 0.3s ease-out; background: #080808; padding: 0 15px; }
  .trust-item-wrapper.is-active .trust-content { max-height: 500px; padding: 10px 15px 20px 15px; border-top: 1px solid #1a1a1a; }
  
  .trust-input { 
    background: #111; border: 1px solid #222; color: #fff; padding: 10px; 
    border-radius: 2px; font-size: 11px; outline: none; width: 100%; box-sizing: border-box;
    font-family: sans-serif;
  }

  .trust-btn { 
    background: var(--k-cyan); 
    color: #000; 
    border: none; 
    width: 100%; 
    padding: 12px; 
    font-family: var(--k-font);
    font-size: 8px; 
    cursor: pointer; 
    transition: 0.3s; 
    text-transform: uppercase; 
    text-decoration: none; 
    display: block; 
    text-align: center;
  }

  .add-block-info p { font-size: 11px; color: #ccc; line-height: 1.4; }

  @media (max-width: 1000px) { .trust-bar-grid { grid-template-columns: 1fr 1fr; } }
  @media (max-width: 600px) { .trust-bar-grid { grid-template-columns: 1fr; } }
</style>

<section class="trust-bar-section">
  <div class="trust-bar-grid">
    
    <div class="trust-item-wrapper">
      <div class="trust-header" onclick="toggleTrust(this)">
        <div class="trust-icon-wrapper">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 11l4 4L19 7"></path></svg>
        </div>
        <div class="trust-text">
          <span class="trust-title">{{ section.settings.title_1 }}</span>
          <span class="trust-subtitle">{{ section.settings.sub_1 }}</span>
        </div>
      </div>
      <div class="trust-content">
        <form id="rea-form" class="trust-form" style="display: flex; flex-direction: column; gap: 8px;">
          <input type="text" name="contact[name]" placeholder="Nombre completo" class="trust-input" required>
          <input type="email" name="contact[email]" placeholder="Correo electrónico" class="trust-input" required>
          <input type="text" name="contact[address]" placeholder="Ciudad y Dirección" class="trust-input" required>
          <button type="submit" class="trust-btn" id="btn-envio-rea">ENVIAR</button>
        </form>
        <div id="rea-mensaje" style="font-size: 10px; margin-top: 10px; display: none; font-family: sans-serif;"></div>
      </div>
    </div>

    <div class="trust-item-wrapper">
      <div class="trust-header" onclick="toggleTrust(this)">
        <div class="trust-icon-wrapper">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0110 0v4"></path></svg>
        </div>
        <div class="trust-text">
          <span class="trust-title">{{ section.settings.title_2 }}</span>
          <span class="trust-subtitle">{{ section.settings.sub_2 }}</span>
        </div>
      </div>
      <div class="trust-content">
        <div class="add-block-info">
          <p>{{ section.settings.info_2 }}</p>
        </div>
        <a href="{{ section.settings.link_2 }}" class="trust-btn">MÉTODOS DE PAGO</a>
      </div>
    </div>

    <div class="trust-item-wrapper">
      <div class="trust-header" onclick="toggleTrust(this)">
        <div class="trust-icon-wrapper">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
        </div>
        <div class="trust-text">
          <span class="trust-title">{{ section.settings.title_3 }}</span>
          <span class="trust-subtitle">{{ section.settings.sub_3 }}</span>
        </div>
      </div>
      <div class="trust-content">
        <form action="{{ section.settings.link_tracking }}" method="get" class="trust-form" style="display: flex; flex-direction: column; gap: 8px;">
          <input type="text" class="trust-input" placeholder="Nro de Guía" required>
          <button type="submit" class="trust-btn">RASTREAR</button>
        </form>
      </div>
    </div>

    <div class="trust-item-wrapper">
      <div class="trust-header" onclick="toggleTrust(this)">
        <div class="trust-icon-wrapper">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"></path></svg>
        </div>
        <div class="trust-text">
          <span class="trust-title">{{ section.settings.title_4 }}</span>
          <span class="trust-subtitle">{{ section.settings.sub_4 }}</span>
        </div>
      </div>
      <div class="trust-content">
        <div class="add-block-info">
          <p>{{ section.settings.info_4 }}</p>
        </div>
      </div>
    </div>

  </div>
</section>

<script>
function toggleTrust(element) {
  const wrapper = element.closest('.trust-item-wrapper');
  const isActive = wrapper.classList.contains('is-active');
  document.querySelectorAll('.trust-item-wrapper').forEach(item => item.classList.remove('is-active'));
  if (!isActive) wrapper.classList.add('is-active');
}

// Lógica de formulario simplificada
document.getElementById('rea-form')?.addEventListener('submit', function(e) {
  e.preventDefault();
  const btn = document.getElementById('btn-envio-rea');
  const msg = document.getElementById('rea-mensaje');
  btn.innerText = 'ENVIANDO...';
  
  fetch('/contact', {
    method: 'POST',
    body: new FormData(this)
  }).then(() => {
    msg.style.display = 'block';
    msg.innerHTML = '✅ ENVIADO CORRECTAMENTE';
    btn.innerText = 'LISTO';
    this.reset();
  });
});
</script>

{% schema %}
{
  "name": "Barra de Confianza V3",
  "settings": [
    { "type": "color", "id": "accent_color", "label": "Color Acento", "default": "#00D1FF" },
    { "type": "text", "id": "title_1", "label": "Título 1", "default": "ENVÍO GRATIS" },
    { "type": "text", "id": "sub_1", "label": "Subtítulo 1", "default": "Rellena tus datos" },
    { "type": "text", "id": "title_2", "label": "Título 2", "default": "PAGO SEGURO" },
    { "type": "text", "id": "sub_2", "label": "Subtítulo 2", "default": "Métodos de pago" },
    { "type": "textarea", "id": "info_2", "label": "Info Pago", "default": "Aceptamos tarjetas y transferencias." },
    { "type": "url", "id": "link_2", "label": "Link Botón Pago" },
    { "type": "text", "id": "title_3", "label": "Título 3", "default": "RASTREO" },
    { "type": "text", "id": "sub_3", "label": "Subtítulo 3", "default": "Seguimiento en línea" },
    { "type": "url", "id": "link_tracking", "label": "Link Rastreo" },
    { "type": "text", "id": "title_4", "label": "Título 4", "default": "SOPORTE" },
    { "type": "text", "id": "sub_4", "label": "Subtítulo 4", "default": "Atención Directa" },
    { "type": "textarea", "id": "info_4", "label": "Info Soporte", "default": "Atención 24/7 para ti." }
  ],
  "presets": [{ "name": "Barra de Confianza V3" }]
}
{% endschema %}