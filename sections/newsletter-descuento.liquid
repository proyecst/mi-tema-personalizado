{%- style -%}
  #shopify-section-{{ section.id }} {
    background-color: {{ section.settings.bg_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }

  .news-promo-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 40px 20px;
    background: {{ section.settings.inner_bg_color }};
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
  }

  .news-promo-badge {
    display: inline-block;
    background: #e62e04;
    color: #fff;
    padding: 5px 15px;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: bold;
    margin-bottom: 20px;
    text-transform: uppercase;
  }

  .news-promo-title {
    font-size: 2.2rem;
    margin-bottom: 10px;
    color: {{ section.settings.text_color }};
  }

  .news-promo-subtitle {
    font-size: 1.1rem;
    color: {{ section.settings.text_color }};
    opacity: 0.8;
    margin-bottom: 30px;
  }

  .news-promo-form-wrapper {
    max-width: 500px;
    margin: 0 auto;
  }

  .news-promo-form {
    display: flex;
    gap: 10px;
  }

  .news-promo-input {
    flex-grow: 1;
    padding: 15px 20px;
    border: 1px solid #ddd;
    border-radius: 50px;
    outline: none;
    font-size: 1rem;
  }

  .news-promo-submit {
    padding: 15px 30px;
    background: {{ section.settings.btn_bg_color }};
    color: {{ section.settings.btn_text_color }};
    border: none;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .news-promo-submit:hover {
    transform: scale(1.05);
  }

  .news-promo-success {
    color: #27ae60;
    font-weight: bold;
    margin-top: 15px;
  }

  @media screen and (max-width: 600px) {
    .news-promo-form {
      flex-direction: column;
    }
    .news-promo-title {
      font-size: 1.6rem;
    }
  }
{%- endstyle -%}

<div class="page-width">
  <div class="news-promo-container">
    {% if section.settings.badge_text != blank %}
      <span class="news-promo-badge">{{ section.settings.badge_text }}</span>
    {% endif %}

    <h2 class="news-promo-title">{{ section.settings.title }}</h2>
    <p class="news-promo-subtitle">{{ section.settings.subtitle }}</p>

    <div class="news-promo-form-wrapper">
      {% form 'customer', class: 'news-promo-form' %}
        <input type="hidden" name="contact[tags]" value="newsletter, primer-descuento">
        
        {% if form.posted_successfully? %}
          <p class="news-promo-success">¡Gracias! Revisa tu correo para obtener tu cupón del 15%.</p>
        {% else %}
          <input
            type="email"
            name="contact[email]"
            class="news-promo-input"
            value="{{ form.email }}"
            placeholder="Tu mejor correo electrónico"
            required
          >
          <button type="submit" class="news-promo-submit">
            {{ section.settings.btn_text }}
          </button>
        {% endif %}

        {% if form.errors %}
          <p style="color: red; margin-top: 10px;">{{ form.errors | default_errors }}</p>
        {% endif %}
      {% endform %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter con Descuento",
  "settings": [
    { "type": "text", "id": "badge_text", "label": "Etiqueta superior", "default": "Oferta de Bienvenida" },
    { "type": "text", "id": "title", "label": "Título", "default": "Únete a la familia Kieslect" },
    { "type": "textarea", "id": "subtitle", "label": "Subtítulo", "default": "Suscríbete y obtén un 15% de descuento en tu primer pedido." },
    { "type": "text", "id": "btn_text", "label": "Texto del botón", "default": "Obtener mi descuento" },
    { "type": "color", "id": "bg_color", "label": "Color de fondo sección", "default": "#ffffff" },
    { "type": "color", "id": "inner_bg_color", "label": "Color de fondo caja", "default": "#f4f4f4" },
    { "type": "color", "id": "text_color", "label": "Color del texto", "default": "#000000" },
    { "type": "color", "id": "btn_bg_color", "label": "Color botón", "default": "#000000" },
    { "type": "color", "id": "btn_text_color", "label": "Color texto botón", "default": "#ffffff" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "default": 60, "unit": "px", "label": "Padding Superior" },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "default": 60, "unit": "px", "label": "Padding Inferior" }
  ],
  "presets": [
    {
      "name": "Newsletter con Descuento"
    }
  ]
}
{% endschema %}